<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Obscura</title>
        <link rel="stylesheet" href="./assets/css/n0tbootstrap.css" />
        <link rel="stylesheet" href="./assets/css/styles.css" />
        <link rel="stylesheet" href="./assets/css/modals.css" />
    </head>
    <body>
        <div class="container-fluid">
            <!-- Header -->
            <div id="header_wrapper">
                <div class="row mb-5 mt-1" id="header">
                    <div class="col-md-6 mr-auto ml-auto">
                        <a href="/" style="display: block">
                            <h1 id="page_title" class="text-center">
                                <b>Secure</b>
                                <img src="./assets/img/badge.svg" class="logo_badge" />
                                Notes
                            </h1>

                            <h4 class="subtitle text-center mt-1">
                                A <b>s<i>3</i>cure</b> way to share
                                <div class="censored">sensitive</div>
                                information
                            </h4>
                        </a>
                    </div>
                </div>
            </div>
            <!-- End Header -->

            <!-- Main Content -->
            <div class="container mb-3">
                <div class="row mt-5 mb-5">
                    <div class="col-md-6 mr-auto ml-auto">
                        <div class="card">
                            <div class="cb">
                                <!-- This is shown if no ID is in the URL -->
                                <div id="manual_input_container">
                                    <h1>Retrieve Secret</h1>
                                    <p class="subtext">Enter your secret ID below if you don’t have a direct link.</p>
                                    <input
                                        type="text"
                                        id="secret_id"
                                        placeholder="Enter Secret ID"
                                        class="input-field"
                                    />
                                    <button id="retrieveButton" class="btn">Retrieve</button>
                                </div>

                                <!-- Loading Spinner -->
                                <div id="spinner" class="spinner mb-5 mt-5">
                                    <div class="loader"></div>
                                </div>

                                <!-- Password Input & Decrypt Button -->
                                <div id="decrypt_container" class="decrypt-box">
                                    <div class="lock-icon" id="lockIcon">🔒</div>
                                    <input
                                        type="password"
                                        id="pwd_input"
                                        placeholder="Enter password to decrypt..."
                                        class="input-field"
                                    />
                                    <button id="decryptButton" class="btn">🔓 Decrypt</button>
                                    <p id="errorMsg" class="error-msg" style="display: none">❌ Incorrect password</p>
                                </div>

                                <!-- Secret Display Box -->
                                <div id="secret_container" style="display: none">
                                    <p id="secret_metadata" class="secret-meta"></p>
                                    <pre id="secretText" class="secret-box"></pre>
                                    <button id="copySecretButton" class="copy-btn">📋</button>
                                    <span id="secretCopied" class="copied_msg">Copied! ✅</span>
                                </div>
                            </div>
                            <div class="cf">
                                <!-- Burn Notice -->
                                <p id="burnNotice">⚠️ This secret has been retrieved and is now burned forever.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <section class="features">
                    <div class="feature-card">
                        <h3>🔒 End-to-End Encryption</h3>
                        <p>
                            Your message is encrypted <b>before it leaves your browser</b>. The encryption key is never
                            transmitted or stored, ensuring only those with the key can decrypt it.
                        </p>
                    </div>

                    <div class="feature-card">
                        <h3>🇪🇺 Secure European Storage</h3>
                        <p>
                            <b>All</b> encrypted data is stored with an EU-based provider, aligned with strict data
                            protection regulations. Since we never see your key, stored messages remain unreadable to
                            us.
                        </p>
                    </div>

                    <div class="feature-card">
                        <h3>🕵️ Zero-Knowledge Security</h3>
                        <p>
                            We never store or transmit encryption keys, ensuring only those with access can read a
                            message. The system also lets you verify if you were the sole reader.
                        </p>
                    </div>
                </section>
            </div>

            <footer class="footer fixed-bottom">
                <p>
                    Made with ♥ by <a href="https://github.com/abovehero">AboveHero</a> ·
                    <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a>
                </p>
            </footer>
        </div>
        <script src="./assets/js/main.js" type="module" defer></script>
    </body>
</html>
